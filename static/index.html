<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaCrawler - å¤šå¹³å°åª’ä½“çˆ¬è™«ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
        }

        .feature-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .feature-desc {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .feature-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .stats-overview {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .stats-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 1em;
        }

        .quick-actions {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .actions-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: white;
            border: 2px solid #eee;
            border-radius: 10px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
        }

        .action-btn:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .action-icon {
            font-size: 1.5em;
            min-width: 30px;
        }

        .action-text {
            flex: 1;
        }

        .action-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .action-desc {
            font-size: 0.9em;
            color: #666;
        }

        .footer {
            text-align: center;
            color: rgba(255,255,255,0.8);
            margin-top: 50px;
        }

        .footer p {
            margin-bottom: 10px;
        }

        .footer a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
        }

        .footer a:hover {
            color: white;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .actions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ•·ï¸ MediaCrawler</h1>
            <p>å¤šå¹³å°åª’ä½“å†…å®¹çˆ¬è™«ç®¡ç†ç³»ç»Ÿ</p>
            <p>æ”¯æŒæŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ã€Bç«™ã€å¾®åšã€çŸ¥ä¹ç­‰å¹³å°çš„å†…å®¹çˆ¬å–ä¸ç®¡ç†</p>
        </div>

        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <div class="stats-overview">
            <div class="stats-title">ğŸ“Š ç³»ç»Ÿæ¦‚è§ˆ</div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalTasks">-</div>
                    <div class="stat-label">æ€»ä»»åŠ¡æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalVideos">-</div>
                    <div class="stat-label">è§†é¢‘æ€»æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalFiles">-</div>
                    <div class="stat-label">æ”¶è—è§†é¢‘</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="storageUsed">-</div>
                    <div class="stat-label">å­˜å‚¨ä½¿ç”¨</div>
                </div>
            </div>
        </div>

        <!-- æ ¸å¿ƒåŠŸèƒ½ -->
        <div class="feature-grid">
            <!-- ä»»åŠ¡ç®¡ç† -->
            <div class="feature-card" onclick="window.location.href='/static/api_test.html'">
                <span class="feature-icon">ğŸš€</span>
                <div class="feature-title">ä»»åŠ¡ç®¡ç†</div>
                <div class="feature-desc">
                    å¯åŠ¨å’Œç®¡ç†å¤šå¹³å°çˆ¬è™«ä»»åŠ¡ï¼ŒæŸ¥çœ‹æ‰§è¡Œç»“æœï¼Œæ”¯æŒå…³é”®è¯æœç´¢ã€ç”¨æˆ·ä¸»é¡µçˆ¬å–ç­‰å¤šç§æ¨¡å¼
                </div>
                <div class="feature-actions">
                    <a href="/static/api_test.html" class="btn btn-primary">å¼€å§‹çˆ¬å–</a>
                    <a href="/static/task_results.html" class="btn btn-secondary">æŸ¥çœ‹ç»“æœ</a>
                </div>
            </div>

            <!-- è§†é¢‘æ”¶è—ç®¡ç† -->
            <div class="feature-card" onclick="window.location.href='/static/video_favorites.html'">
                <span class="feature-icon">â¤ï¸</span>
                <div class="feature-title">è§†é¢‘æ”¶è—ç®¡ç†</div>
                <div class="feature-desc">
                    ç®¡ç†æ”¶è—çš„è§†é¢‘å†…å®¹ï¼Œæ”¯æŒé¢„è§ˆã€ä¸‹è½½ã€åˆ é™¤ç­‰æ“ä½œï¼ŒæŸ¥çœ‹è§†é¢‘è¯¦æƒ…
                </div>
                <div class="feature-actions">
                    <a href="/static/video_favorites.html" class="btn btn-primary">æˆ‘çš„æ”¶è—</a>
                    <a href="#" onclick="checkMinIO()" class="btn btn-secondary">äº‘ç«¯å­˜å‚¨</a>
                </div>
            </div>



            <!-- æ•°æ®åˆ†æ -->
            <div class="feature-card">
                <span class="feature-icon">ğŸ“ˆ</span>
                <div class="feature-title">æ•°æ®ç»Ÿè®¡åˆ†æ</div>
                <div class="feature-desc">
                    åˆ†æçˆ¬å–æ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¹³å°åˆ†å¸ƒã€çƒ­é—¨å†…å®¹ã€ç”¨æˆ·è¡Œä¸ºç­‰
                </div>
                <div class="feature-actions">
                    <a href="#" onclick="showAnalytics()" class="btn btn-primary">æ•°æ®åˆ†æ</a>
                    <a href="#" onclick="exportData()" class="btn btn-secondary">æ•°æ®å¯¼å‡º</a>
                </div>
            </div>

            <!-- è´¦å·ç®¡ç† -->
            <div class="feature-card" onclick="window.location.href='/static/account_management.html'">
                <span class="feature-icon">ğŸ‘¤</span>
                <div class="feature-title">è´¦å·ç®¡ç†</div>
                <div class="feature-desc">
                    ç®¡ç†å¤šå¹³å°è´¦å·ä¿¡æ¯ï¼Œæ”¯æŒè¿œç¨‹æ¡Œé¢ç™»å½•ã€æ»‘åŠ¨éªŒè¯ã€Cookieç®¡ç†ç­‰
                </div>
                <div class="feature-actions">
                    <a href="/static/account_management.html" class="btn btn-primary">è´¦å·ç®¡ç†</a>
                    <a href="#" onclick="startRemoteLogin()" class="btn btn-secondary">è¿œç¨‹ç™»å½•</a>
                </div>
            </div>

            <!-- çˆ¬è™«æ§åˆ¶ç®¡ç† -->
            <div class="feature-card" onclick="window.location.href='/static/crawler_control.html'">
                <span class="feature-icon">ğŸ•·ï¸</span>
                <div class="feature-title">çˆ¬è™«æ§åˆ¶ç®¡ç†</div>
                <div class="feature-desc">
                    é€šè¿‡APIæ§åˆ¶çˆ¬è™«è¡Œä¸ºï¼Œæ”¯æŒå®æ—¶é…ç½®ã€ä»»åŠ¡ç›‘æ§ã€èµ„æºç®¡ç†ç­‰åŠŸèƒ½
                </div>
                <div class="feature-actions">
                    <a href="/static/crawler_control.html" class="btn btn-primary">çˆ¬è™«æ§åˆ¶</a>
                    <a href="/docs" class="btn btn-secondary">APIæ–‡æ¡£</a>
                </div>
            </div>
        </div>

        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="quick-actions">
            <div class="actions-title">âš¡ å¿«é€Ÿæ“ä½œ</div>
            <div class="actions-grid">
                <a href="/static/api_test.html" class="action-btn">
                    <span class="action-icon">ğŸ¯</span>
                    <div class="action-text">
                        <div class="action-title">å¿«é€Ÿçˆ¬å–</div>
                        <div class="action-desc">ç«‹å³å¼€å§‹ä¸€ä¸ªæ–°çš„çˆ¬å–ä»»åŠ¡</div>
                    </div>
                </a>
                
                <a href="/static/task_results.html" class="action-btn">
                    <span class="action-icon">ğŸ“Š</span>
                    <div class="action-text">
                        <div class="action-title">æŸ¥çœ‹ç»“æœ</div>
                        <div class="action-desc">æŸ¥çœ‹æœ€æ–°çš„çˆ¬å–ç»“æœ</div>
                    </div>
                </a>
                
                <a href="/static/video_favorites.html" class="action-btn">
                    <span class="action-icon">â¤ï¸</span>
                    <div class="action-text">
                        <div class="action-title">æˆ‘çš„æ”¶è—</div>
                        <div class="action-desc">æŸ¥çœ‹æ”¶è—çš„è§†é¢‘å†…å®¹</div>
                    </div>
                </a>
                
                <a href="/static/crawler_control.html" class="action-btn">
                    <span class="action-icon">ğŸ•·ï¸</span>
                    <div class="action-text">
                        <div class="action-title">çˆ¬è™«æ§åˆ¶</div>
                        <div class="action-desc">APIé©±åŠ¨çš„çˆ¬è™«ç®¡ç†</div>
                    </div>
                </a>
                
                <a href="/docs" class="action-btn">
                    <span class="action-icon">ğŸ“š</span>
                    <div class="action-text">
                        <div class="action-title">APIæ–‡æ¡£</div>
                        <div class="action-desc">æŸ¥çœ‹å®Œæ•´çš„APIæ¥å£æ–‡æ¡£</div>
                    </div>
                </a>
                
                <a href="/static/account_management.html" class="action-btn">
                    <span class="action-icon">ğŸ‘¤</span>
                    <div class="action-text">
                        <div class="action-title">è´¦å·ç®¡ç†</div>
                        <div class="action-desc">ç®¡ç†å¤šå¹³å°è´¦å·å’Œç™»å½•</div>
                    </div>
                </a>
                
                <a href="#" onclick="exportAllData()" class="action-btn">
                    <span class="action-icon">ğŸ“¤</span>
                    <div class="action-text">
                        <div class="action-title">å¯¼å‡ºæ•°æ®</div>
                        <div class="action-desc">å¯¼å‡ºæ‰€æœ‰çˆ¬å–çš„æ•°æ®</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- é¡µè„š -->
        <div class="footer">
            <p>&copy; 2024 MediaCrawler - å¤šå¹³å°åª’ä½“çˆ¬è™«ç³»ç»Ÿ</p>
            <p>
                <a href="https://github.com/mediacrawler" target="_blank">GitHub</a> | 
                <a href="/docs" target="_blank">æ–‡æ¡£</a> | 
                <a href="#" onclick="showSupport()">æŠ€æœ¯æ”¯æŒ</a>
            </p>
            <p style="font-size: 0.9em; margin-top: 10px;">
                âš ï¸ æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¹³å°ä½¿ç”¨æ¡æ¬¾
            </p>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadSystemStats();
        });

        // åŠ è½½ç³»ç»Ÿç»Ÿè®¡
        async function loadSystemStats() {
            try {
                // åŠ è½½ä»»åŠ¡ç»Ÿè®¡
                const taskResponse = await fetch('/api/v1/tasks/statistics');
                if (taskResponse.ok) {
                    const taskData = await taskResponse.json();
                    if (taskData.code === 200) {
                        document.getElementById('totalTasks').textContent = taskData.data.total_tasks || 0;
                    }
                } else {
                    console.warn('ä»»åŠ¡ç»Ÿè®¡åŠ è½½å¤±è´¥:', taskResponse.status);
                }

                // åŠ è½½ä»»åŠ¡ç»“æœç»Ÿè®¡
                const taskResultsResponse = await fetch('/api/v1/task-results/statistics');
                if (taskResultsResponse.ok) {
                    const taskResultsData = await taskResultsResponse.json();
                    if (taskResultsData.code === 200) {
                        const totalVideos = taskResultsData.data.database_stats?.total_videos || 0;
                        document.getElementById('totalVideos').textContent = totalVideos;
                    }
                } else {
                    console.warn('ä»»åŠ¡ç»“æœç»Ÿè®¡åŠ è½½å¤±è´¥:', taskResultsResponse.status);
                }

                // åŠ è½½æ”¶è—ç»Ÿè®¡
                const favoritesResponse = await fetch('/api/v1/favorites/statistics');
                if (favoritesResponse.ok) {
                    const favoritesData = await favoritesResponse.json();
                    if (favoritesData.code === 200) {
                        document.getElementById('totalFiles').textContent = favoritesData.data.total_favorites || 0;
                        document.getElementById('storageUsed').textContent = favoritesData.data.total_size_formatted || '0 B';
                    }
                } else {
                    console.warn('æ”¶è—ç»Ÿè®¡åŠ è½½å¤±è´¥:', favoritesResponse.status);
                    // å¦‚æœæ”¶è—ç»Ÿè®¡å¤±è´¥ï¼Œå°è¯•åŠ è½½MinIOç»Ÿè®¡
                    const minioResponse = await fetch('/api/v1/minio/statistics');
                    if (minioResponse.ok) {
                        const minioData = await minioResponse.json();
                        if (minioData.code === 200) {
                            document.getElementById('totalFiles').textContent = minioData.data.total_objects || 0;
                            document.getElementById('storageUsed').textContent = formatBytes(minioData.data.total_size || 0);
                        }
                    } else {
                        console.warn('MinIOç»Ÿè®¡åŠ è½½å¤±è´¥:', minioResponse.status);
                        // è®¾ç½®é»˜è®¤å€¼
                        document.getElementById('totalFiles').textContent = 0;
                        document.getElementById('storageUsed').textContent = '0 B';
                    }
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
                // æ˜¾ç¤ºé»˜è®¤å€¼
                document.getElementById('totalTasks').textContent = 0;
                document.getElementById('totalVideos').textContent = 0;
                document.getElementById('totalFiles').textContent = 0;
                document.getElementById('storageUsed').textContent = '0 B';
            }
        }

        // æ£€æŸ¥MinIOçŠ¶æ€
        async function checkMinIO() {
            try {
                const response = await fetch('/api/v1/minio/status');
                const data = await response.json();
                
                if (data.code === 200 && data.data.available) {
                    window.location.href = '#minio-management';
                    alert('MinIOæœåŠ¡æ­£å¸¸è¿è¡Œï¼');
                } else {
                    alert('MinIOæœåŠ¡ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥é…ç½®ã€‚\n\nå‚è€ƒæ–‡æ¡£ï¼šMINIO_SETUP_GUIDE.md');
                }
            } catch (error) {
                alert('MinIOæœåŠ¡è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€ã€‚');
            }
        }

        // æ‰“å¼€è§†é¢‘é¢„è§ˆ
        function openVideoPreview() {
            const platform = prompt('è¯·è¾“å…¥å¹³å° (dy/xhs/ks/bili/wb/zhihu):');
            const videoId = prompt('è¯·è¾“å…¥è§†é¢‘ID:');
            
            if (platform && videoId) {
                window.open(`/static/video_preview.html?platform=${platform}&video_id=${videoId}`, '_blank');
            }
        }

        // æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨
        function showVideoList() {
            window.location.href = '/static/task_results.html';
        }

        // æ˜¾ç¤ºæ•°æ®åˆ†æ
        function showAnalytics() {
            alert('æ•°æ®åˆ†æåŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            alert('æ•°æ®å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
        }

        // æ˜¾ç¤ºè®¾ç½®
        function showSettings() {
            alert('ç³»ç»Ÿè®¾ç½®åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
        }



        // å¼€å§‹è¿œç¨‹ç™»å½•
        function startRemoteLogin() {
            window.location.href = '/static/account_management.html';
        }

        // å¯¼å‡ºæ‰€æœ‰æ•°æ®
        function exportAllData() {
            if (confirm('ç¡®å®šè¦å¯¼å‡ºæ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚')) {
                alert('å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
            }
        }

        // æ˜¾ç¤ºæŠ€æœ¯æ”¯æŒ
        function showSupport() {
            alert('æŠ€æœ¯æ”¯æŒä¿¡æ¯ï¼š\n\nğŸ“§ Email: support@mediacrawler.com\nğŸ“š æ–‡æ¡£: /docs\nğŸ› BugæŠ¥å‘Š: GitHub Issues');
        }

        // å·¥å…·å‡½æ•°
        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + sizes[i];
        }

        // å®šæœŸæ›´æ–°ç»Ÿè®¡æ•°æ®
        setInterval(loadSystemStats, 30000); // æ¯30ç§’æ›´æ–°ä¸€æ¬¡
    </script>
</body>
</html> 